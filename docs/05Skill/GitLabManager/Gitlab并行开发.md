# Gitlab并行开发

## 1. 任务分解
> 影响任务分解的两个岗位: 产品经理和架构师
```markdown
1. 尽可能解耦
2. 尽量避免交叉
3. 理清依赖关系
4. 避免循环依赖
```

```markdown
产品经理的段位与格局
不懂设计的开发不是好产品，产品经理
产品经理可以分为：
1. 战略型产品经理
2. 业务型产品经理
3. 功能型产品经理

他们有什么差别呢？
战略型产品经理：通常是企业高层，对于行业/领域了如指掌，主要做战略规划
业务型产品经理：一定时刻紧盯用户痛点，业务发展中的各种变化，他做任何需求分析和功能都来源于用户遇到的问题。不是业内人士做不了业务型产品经理。
功能型产品经理：通常是计算机专业毕业，懂得使用各种工具，例如设计软件，画图软件。掌握需求分析，产品调研，竞品分析，交互设计等等，能够图文并茂的制作出RPD(产品需求文档)和PPT(幻灯片)。但是用户痛点无感，只能被动接受来自上层的工作安排。
```

```markdown
# 架构师的段位与格局
1. 企业架构师：战略规划
2. 业务型架构师：业务导向技术，全局规划和实施
3. 功能型架构师：根据需求文档，完成环境搭建，偶尔涉及到一些算法开发，总体来说目前国内很多功能型架构师仅仅是熟手程序员，完成搭积木的工作。
```

```markdown
产品经理和架构师的大局观
我们从小的教育就是如何拆分问题、解决问题，这样做显然会使复杂的问题变得更容易些。但是这带来一个新问题，我们丧失了如何从宏观角度看问题，分析问题，解决问题，对更大的整体的内在领悟能力。这导致了我们对现有问题提出的解决方案，但无法预计实施该方案后产生的各种后果，为此我们付出了巨大代价。
而我们试图考虑大局的时候，总要在脑子里重新排序，组合哪些拆分出来问题，给它们编组列单。习惯性认为解决了所有微观领域的问题，那么宏观上问题就得到了解决。然而，这种做法是徒劳无益的，就好比试图通过重新拼起来的碎镜子来观察真实的影像。
所以在一段时间后，我们便干脆完全放弃了对整体的关注。
```

## 2. 配套环境
### 什么是配套环境
配套环境是指开发和测试环境，参考生产环境，以最小化实例，最小化节点，满足运行项目的环境，尽量减少环境差异，包括硬盘配置差异，网络差异，资源配置差异，以及应用软件安装配置等等差异。

### 准备配套环境
1. 开发环境(development),也叫集成开发环境，为开发团队提供共享资源，因为每个程序员在自己的电脑上运行一整套的分布式系统不太现实，所以需要将公共部分抽离出来，集中提供服务，例如数据库，缓存，搜索引擎，配置中心，注册中心等等。
2. 测试环境(testing),由于开发环境需要频繁合并新功能，部署，重启都会影响正常的测试，例如测试一般，开发环境上加入了新功能，此时会影响测试。所以我们需要一台独立，稳定的测试环境，这个环境由测试人员自己控制，什么时候部署，测试自己说了算。
3. 用户交付测试环境(staging)Stage/.UAT环境，Beta/Preview演示环境，定期同步生产环境数据库。
4. 功能测试环境(feature/.hotfix)新功能，BUG修复等等。
上面三个环境，至少一台独立服务器，功能测试环境(feature/.hotfix)需要若干台服务器。功能测试环境的服务器是共享的，即谁提测谁用，用过之后释放出来。每个环境都有一整套，配套的服务，例如数据库，缓存，搜索引擎，消息队列等等

## 3. 分支合并
### 代码分支
> 时间线分支
1. 开发分支Development面向开发人员
2. 测试分支Testing面向测试人员
3. 交付验收分支Staging交付验收分支，俗称UAT面向测试和客户
4. 生产分支Production,面向用户
在小公司中通常会省去UAT这个环节，从Testing.直接上生产环境

### 分支保护
分支保护的目的，防止被误删除，禁止向该分支提交代码，代码只能通过合并方式进入该分支。
分支的权限管理：
l. master: 保护，不能修改代码，只能合并，只有管理员有权限push
2. staging: 保护，不能修改代码，只能合并，只有管理员有权限push
3. testing: 保护，不能修改代码，测试人员可以合并merge
4. development: 保护，开发人员可以修改代码，合并，push
5. tag标签：保护，对应Release本版

### 功能分支(Feature)
任务分解之后，每个功能对应一个分支，功能分支的代码来自development分支，我们会有很多功能分支，开发任务在功能分支上完成开发，开发完成后将任务标记为“测试”，测试部会安排测试环境，部署该分支上的代码，测试结果分为BUG和Pending(测试通过，挂起，等待发车)买票上车：在功能分支上，我们有很多开发完成功能，他们处于挂起状态，然后根据升级计划，有序的合并到开发分支，再到测试分支，最后升级到生产环境。

### Feature分支操作步骤
1.创建Issue议题
2.从Development创建Feature分支
3.获取Feature分支代码
4.修改代码，提交代码，测试代码
5.合并Feature分支到Development分支
6.关闭Issue议题
