Ubuntu 20.04 äº‘æœåŠ¡å™¨åˆå§‹åŒ–è®¾ç½®

è´­ä¹°äº† Ubuntu 20.04 äº‘æœåŠ¡å™¨ä»¥åï¼Œä¸ºäº†æå‡ç³»ç»Ÿçš„å®‰å…¨æ€§å’Œå¯é æ€§ï¼Œæˆ‘ä¸€èˆ¬ä¼šè¿›è¡Œä¸€ç³»åˆ—å¾ˆåŸºç¡€çš„ç³»ç»Ÿåˆå§‹åŒ–è®¾ç½®ã€‚å®ƒä»¬åŒ…æ‹¬ï¼š
åˆ›å»ºä¸€ä¸ªæ™®é€šç®¡ç†å‘˜è´¦æˆ·
ä½¿ç”¨ SSH å¯†é’¥è®¤è¯èº«ä»½
ç¦ç”¨ SSH å¯†ç ç™»å½•
æ¥ä¸‹æ¥è®©æˆ‘ä¸ºå¤§å®¶æ¼”ç¤ºå¦‚ä½•è¿›è¡Œè¿™äº›åˆå§‹åŒ–è®¾ç½®ã€‚

æç¤º
æœ¬è§†é¢‘åŒæ—¶é€‚ç”¨äº Ubuntu å„å†å²ç‰ˆæœ¬ï¼Œæ‰€æœ‰åŸºäº Debian çš„å‘è¡Œç‰ˆçš†å¯å‚è€ƒã€‚
è¿™é‡Œè¿˜æ˜¯ä»¥ Vultr (opens new window)å¹³å°çš„äº‘æœåŠ¡å™¨ä¸ºä¾‹è¿›è¡Œæ¼”ç¤ºã€‚
æ–°ç”¨æˆ·ä½¿ç”¨å³ä¾§æ¨å¹¿é“¾æ¥æ³¨å†Œå¯ä»¥ ğŸ‘‰è·å¾—$100çš„30å¤©ä½“éªŒé¢åº¦

# ä¸€ã€åˆ›å»ºæ™®é€šç®¡ç†å‘˜è´¦æˆ·
> æ¡ä»¶å‡è®¾
å‡è®¾æˆ‘ä»¬å½“å‰ä½¿ç”¨ root ç”¨æˆ·èº«ä»½ï¼Œé€šè¿‡ SSH è¿œç¨‹ç™»å½•åˆ° Ubuntu 20.04 çš„ç»ˆç«¯ã€‚ç»ˆç«¯å‘½ä»¤æç¤ºç¬¦ä¸º #ã€‚

## 1. åˆ›å»ºæ™®é€šç”¨æˆ·
è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ adduser å‘½ä»¤åˆ›å»ºä¸€ä¸ªåä¸º herald çš„ç”¨æˆ·ï¼Œæ‰§è¡Œå‘½ä»¤åï¼Œç³»ç»Ÿä¼šäº¤äº’è¯¢é—®å¯†ç ã€å…¨åç­‰ä¸€ç³»åˆ—é—®é¢˜ï¼Œé™¤å¯†ç å¤–ï¼Œå…¶ä»–ä¿¡æ¯éƒ½å¯ä¸å¡«ã€‚
> å®é™…çš„ç”¨æˆ·åè¯·æŒ‰éœ€ä¿®æ”¹
```bash
# adduser herald
```

## 2. å°†ç”¨æˆ·æ·»åŠ åˆ° sudo ç”¨æˆ·ç»„
ä½¿ç”¨ usermod å‘½ä»¤ï¼Œé™„åŠ  -aG å‚æ•°ï¼Œå°†ç”¨æˆ· herald æ·»åŠ åˆ° sudo ç”¨æˆ·ç»„ã€‚
```bash
# usermod -aG sudo herald
```
> -aG å‚æ•°å¯ä»¥åœ¨ä¿æŒç”¨æˆ·åŸæœ‰ç”¨æˆ·ç»„è®¾ç½®çš„å‰æä¸‹ï¼Œå°†ç”¨æˆ·è¿½åŠ åˆ°æŒ‡å®šçš„ç”¨æˆ·ç»„ã€‚ä¸ä½¿ç”¨ -a å‚æ•°ä¼šä½¿ç”¨æˆ·ç¦»å¼€åŸæœ‰ç”¨æˆ·ç»„ï¼Œä»…åŠ å…¥åˆ°å‘½ä»¤ä¸­æŒ‡å®šçš„ç”¨æˆ·ç»„ã€‚

# äºŒã€ä½¿ç”¨ SSH å¯†é’¥ç™»å½•äº‘æœåŠ¡å™¨
## ç¬¬ä¸€æ­¥ åˆ›å»ºå¯†é’¥å¯¹
**Windows ç³»ç»Ÿ**

åœ¨æœ¬åœ°è®¡ç®—æœºçš„ PowerShell ä¸­æ‰§è¡Œ ssh-keygen.exe å‘½ä»¤ï¼Œä¼šåœ¨ C:\Users\Herald/.ssh/ ç›®å½•ç”Ÿæˆä¸€ä¸ªåä¸º id_rsa çš„ç§é’¥å’Œä¸€ä¸ªåä¸º id_rsa.pub çš„å…¬é’¥ã€‚
```bash
PS C:\Users\Herald> ssh-keygen.exe
```

**MacOS & Linux ç³»ç»Ÿ**

æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œ ssh-keygen å‘½ä»¤ï¼Œä¼šåœ¨ ~/.ssh/ ç›®å½•ç”Ÿæˆä¸€ä¸ªåä¸º id_rsa çš„ç§é’¥å’Œä¸€ä¸ªåä¸º id_rsa.pub çš„å…¬é’¥ã€‚
```bash
$ ssh-keygen
```

## ç¬¬äºŒæ­¥ å°†å…¬é’¥å¤åˆ¶åˆ°äº‘æœåŠ¡å™¨
**é€šç”¨æ–¹æ³•**
> Windows ç³»ç»Ÿå°†å‘½ä»¤ä¸­çš„ ~/.ssh/id_rsa.pub æ›¿æ¢æˆ C:\Users\Herald/.ssh/id_rsa.pubã€‚
username æ›¿æ¢ä¸ºç™»å½•äº‘æœåŠ¡å™¨çš„ç”¨æˆ·åï¼Œremote_host æ›¿æ¢ä¸ºäº‘æœåŠ¡å™¨çš„ IP åœ°å€ã€‚
```bash
$ cat ~/.ssh/id_rsa.pub | ssh username@remote_host "mkdir -p ~/.ssh && touch ~/.ssh/authorized_keys && chmod -R go= ~/.ssh && cat >> ~/.ssh/authorized_keys"
```

# ä¸‰ã€ç¦ç”¨ SSH å¯†ç ç™»å½•
ç¼–è¾‘ ssh æœåŠ¡çš„é…ç½®æ–‡ä»¶ sshd_config
```bash
$ sudo nano /etc/ssh/sshd_config
```

å°† PasswordAuthentication é¡¹ä¿®æ”¹ä¸º noã€‚

é‡å¯ ssh æœåŠ¡
```bash
sudo systemctl restart ssh
```
