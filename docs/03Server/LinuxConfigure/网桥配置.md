# 通过命令行配置网桥

# 安装软件包
sudo apt install net-tools
sudo apt install bridge-utils

## 创建名为br1的网桥
ip link add name br1 type bridge

## 设置br1网卡状态为up
ip link set br1 up

## 查看当前桥设备状态
brctl show

## 将ens33网卡状态改为up
ip link set ens33 up
## 将ens33网卡添加的网桥br1, 此时ens33不能上网了
ip link set ens33 master br1

## 删除ens33冗余IPv4地址和IPv6地址，通过ip addr查看网卡对应地址
ip addr del dev ens33 192.168.0.167/24
ip addr del dev ens33 fe80::20c:29ff:fe53:b62d/64

## 通过bridge link命令可以看到br0上连接了哪些设备
bridge link
## 给网桥设置ip
ip addr add dev br1 192.168.0.128/24
## 添加默认网关
route add default gw 192.168.0.1 dev br1
## 查看路由配置，ip route show 都会发现这个网桥的网关没设置
route -n

## 部分需要检查DNS解析配置
## route del -net 192.168.0.0/24 gw 0.0.0.0
## /etc/resolve.conf
nameserver 192.168.0.1
